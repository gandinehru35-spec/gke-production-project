apiVersion: networking.k8s.io/v1
kind: Ingress
metadata:
  name: frontend-ingress-secure
  annotations:
    # 1. Annotation to tell the GKE Ingress Controller to use the Managed Certificate
    networking.gke.io/managed-certificates: "gke-app-cert"
    # 2. Annotation to force redirect HTTP to HTTPS
    kubernetes.io/ingress.allow-http: "false" 
    # 3. Use the LoadBalancer IP provisioned in Phase 1
    kubernetes.io/ingress.global-static-ip-name: "<YOUR-LOAD-BALANCER-IP-NAME>" 
spec:
  defaultBackend:
    service:
      name: frontend-service
      port:
        number: 80